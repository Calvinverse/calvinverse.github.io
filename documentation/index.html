
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" />
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Calvinverse - Documentation</title>

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/scribbler-global.css" rel="stylesheet" />
                <link href="/assets/css/scribbler-doc.css" rel="stylesheet" />

        <meta name="application-name" content="Calvinverse" />
        <meta name="msapplication-tooltip" content="Calvinverse" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Calvinverse - Documentation" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://calvinverse.github.io/documentation" />
        <!-- TODO: More social graph meta tags -->



        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->

        <!-- Our scripts -->
<script src="/assets/js/script.js"></script><script src="/assets/js/scribbler.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3T5HLXMFTE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3T5HLXMFTE');
</script>

    </head>
    <body>
        <nav>
            <div class="logo"></div>
            <div class="menu">
                <ul>
            <li class="inactive" >
                <a href="/">Home</a>
            </li>
            <li class="active" >
                Documentation
            </li>
            <li class="inactive" >
                <a href="/resources">Resources</a>
            </li>
</ul>
            </div>
        </nav>


        <div class="wrapper">
                    <!-- Left side column. contains the logo and sidebar -->
                    <aside class="doc__nav">
                        <section>
                            
                            
                            <ul>

                <li><a href="/documentation/about">About</a></li>
                <li><a href="/documentation/configuration">Configuration</a></li>
                <li><a href="/documentation/setup">Environment setup</a></li>
                <li><a href="/documentation/environments">Environments - What and why?</a></li>
                <li><a href="/documentation/examples">Examples</a></li>
                <li><a href="/documentation/getting-started">Getting started</a></li>
                <li><a href="/documentation/how-to-build">How to build</a></li>
                            </ul>
                            
                        </section>
                    </aside>

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                
<div>
    <p>The <a href="https://github.com/Calvinverse">Calvinverse</a> organization provides a number of repositories that
contain all the necessary code to create a <a href="https://en.wikipedia.org/wiki/Build_automation">build environment</a>
based on the idea of <a href="https://martinfowler.com/bliki/ImmutableServer.html">immutable infrastructure</a>. In
other words resources, e.g. virtual machines or containers, are created with all the required applications
and tooling in place. Once a specific version of a resources is created it is never be changed, neither
in the resource form or when deployed as an instance. If changes are required then a new version of the
resource is created, tested and released. Once the resource is released new instances based on this
resource can be deployed.</p>
<p>The repositories describe resources different resources which are needed to create a fully functioning
build <a href="environments.html">environment</a>, for instance:</p>
<ul>
<li>A <a href="../resources/build-controller.html">build controller</a>: This resource collects build jobs
and sends them to the build executors which process the jobs.</li>
<li>A <a href="../resources/build-agent.html">build executor</a>: This resource processes a build job and executes
the actual build.</li>
<li>An <a href="../resources/artefact-storage.html">artefact repository</a>: This resource stores artefacts that
were created during a build and allows other builds or processes to consume these artefacts.</li>
</ul>
<p>The different resources can be combined into a <a href="example-minimal-build-system.html">relatively simple</a>
or small build system which may consist of only a few machines, or they may be combined into a far
more <a href="example-complete-build-system.html">complicated environment</a> which consists of many different
services for those cases where the build workflow is more complex.</p>
<p>The code in the repositories will either create a <a href="https://en.wikipedia.org/wiki/Hyper-V">Hyper-V</a>
virtual machine image or a <a href="https://www.docker.com/">Docker</a> container. However a different
virtualization platform is desired changes can be made to the <a href="https://packer.io">Packer</a> configurations
relatively easy to change the type of images that are generated.</p>
<h2 id="design-principles">Design principles</h2>
<p>The resources and configurations in Calvinverse have been developed using the following design principles:</p>
<ul>
<li>The original code for all resources and configurations is stored in source control. This includes
<a href="https://github.com/Calvinverse/calvinverse.logs.filters">filters</a> for
<a href="https://github.com/Calvinverse/resource.logs.processor">Logstash</a>,
<a href="https://github.com/Calvinverse/calvinverse.metrics.dashboards">dashboards and data sources</a>
for <a href="https://github.com/Calvinverse/resource.metrics.dashboard">Grafana</a>
and general <a href="https://github.com/Calvinverse/calvinverse.configuration">configuration settings</a>
for everything else. By storing all the information in source control it is always possible to see
what changes were made and to roll-back or roll-forward in case of issues.</li>
<li>All resources and configurations have a version.
<ul>
<li>Note that currently the items in the Consul key-value store don't have a version. Work to add versions
to the items in the key-value store is planned.</li>
</ul>
</li>
<li>Secrets are the exception to the first design principle. They are never stored in source control
and are handled by <a href="https://github.com/Calvinverse/resource.secrets">Vault</a>.
Resources that need secrets will obtain them from Vault, either through direct interaction or
via <a href="https://github.com/hashicorp/consul-template">Consul-Template</a>.</li>
<li>Direct access to any of the resources should never be required. This is enabled by streaming logs
and metrics from all resources to a central log store and a central metrics store.
<ul>
<li>Note that you can currently log into the resources through SSH or WinRM if this is absolutely
required.</li>
</ul>
</li>
<li>No changes to running resources should be made (immutable infrastructure). Required changes will
be made to the repository, a new image will be made and once tested it will replace the existing
production instances.</li>
<li>Consul is used to define a local DNS domain to contain environments. i.e. the
<a href="environments.html">environment</a> a resource belongs to is determined by the consul master instances
it connects to.</li>
</ul>
<h2 id="available-resources">Available resources</h2>
<p>The Calvinverse organisation contains a number of repositories with <a href="../resources">resources</a> that
can be used to create a build system. These resources fall into one of the following groups:</p>
<ul>
<li><a href="../resources/category-base.html">Base resources</a> - Resources on which other resources are based.
For instance there are resources that define a VM with just an operating system installed and
prepared. These base VM images will then be used by other resources as their base, thereby reducing
the build times for these more advanced resources because the base resource provides an up to date
operating system install and all the common applications.</li>
<li><a href="../resources/category-build.html">Build resources</a> - Resources which define parts of the build
infrastructure, e.g. the build controller or build executors.</li>
<li><a href="../resources/category-support.html">Supporting resources</a> - Resources which define parts of the
infrastructure which support the work of the build resources, e.g. artefact servers or logging
and metrics services.</li>
</ul>
<p>In general at least some of the base and build resources are needed to build a functional
build system. The other resources may be required if a larger build system needs to be
created.</p>
<p>In order to <a href="getting-started.html">get started</a> creating a build system the first thing to do
is to <a href="how-to-build.html">create</a> the resources that will make up the build system. Once the
resource images have been created one needs to decide on the way the resources are
going to be <a href="setup.html">assembled</a> into a functioning build environment. Part of this process
involves storing the <a href="configuration.html">global configurations</a> for all the resources in a
sensible way.</p>

</div>

            </div>
        </div>


        <footer>
            <div id="footer">
    <div id="fbox1">
        <h2>Related</h2>
        <ul>
            <li><a href="https://github.com/Calvinverse"><i class="fa fa-github"></i> GitHub</a></li>
        </ul>
    </div>
    <div id="fbox2">
        <h2 id="copyright">Copyright</h2>
        <p>Copyright (c) 2020 <a href="/">Petrik van der Velde</a>. All rights reserved.</p>

        <h2 id="disclaimer">Disclaimer</h2>
        <p>The opinions expressed herein are my own personal opinions and do not represent my employer's view in any way.</p>
    </div>
    <div id="fbox3">
        <h2 id="media">Media</h2>
        <p><a href="/feed.rss"><img src="/assets/img/feed.png" alt="RSS feed"></a></p>
    </div>
</div>
<div id="copyright">
    <p>
        Generated by <a href="https://wyam.io" class="link link--light">Wyam</a> on Fri, 30 Oct 2020 00:11:54 GMT

 from commit <a href="https://github.com/calvinverse/calvinverse.docs/tree/7632eaa664ff8bd94efb26e8f2065b269e4c35ad" class="link link--light">7632eaa664ff8bd94efb26e8f2065b269e4c35ad</a> at version 0.1.7.    </p>
</div>
        </footer>
    </body>
</html>