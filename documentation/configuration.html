
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" />
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Calvinverse - Configuration</title>

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/scribbler-global.css" rel="stylesheet" />
                <link href="/assets/css/scribbler-doc.css" rel="stylesheet" />

        <meta name="application-name" content="Calvinverse" />
        <meta name="msapplication-tooltip" content="Calvinverse" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Calvinverse - Configuration" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://calvinverse.github.io/documentation/configuration" />
        <!-- TODO: More social graph meta tags -->



        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->

        <!-- Our scripts -->
<script src="/assets/js/script.js"></script><script src="/assets/js/scribbler.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3T5HLXMFTE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3T5HLXMFTE');
</script>

    </head>
    <body>
        <nav>
            <div class="logo"></div>
            <div class="menu">
                <ul>
            <li class="inactive" >
                <a href="/">Home</a>
            </li>
            <li class="active" >
                Documentation
            </li>
            <li class="inactive" >
                <a href="/resources">Resources</a>
            </li>
</ul>
            </div>
        </nav>


        <div class="wrapper">
                    <!-- Left side column. contains the logo and sidebar -->
                    <aside class="doc__nav">
                        <section>
                            
                            
                            <ul>

                <li><a href="/documentation/about">About</a></li>
                <li class="selected"><a href="/documentation/configuration">Configuration</a></li>
                <li><a href="/documentation/setup">Environment setup</a></li>
                <li><a href="/documentation/environments">Environments - What and why?</a></li>
                <li><a href="/documentation/examples">Examples</a></li>
                <li><a href="/documentation/getting-started">Getting started</a></li>
                <li><a href="/documentation/how-to-build">How to build</a></li>
                            </ul>
                            
                        </section>
                    </aside>

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                
<div>
    <p><strong>Status: Thoughts only, needs proper formatting</strong></p>
<p><a href="https://github.com/Calvinverse/calvinverse.docs/issues/6">Issue #6</a></p>
<h1 id="configure-an-environment">Configure an environment</h1>
<ul>
<li><a href="https://github.com/Calvinverse/calvinverse.infrastructure">Calvinverse.Infrastructure</a>
has some standard configuration files</li>
<li>The defaults are baked into the resources, but not everything can be
configured in source because some things depend on the way the infrastructure
is set up. Those will have to be configured when the resources are created.</li>
<li>Some of the configuration is done when the resource is created. For VMs the
configuration can be read from an ISO which is attached to the VM on start-up.
For Docker containers configuration can be provided either as a Docker volume
or via environment variables</li>
<li>Configurations which need to be available on service start (but not on resource
start) can also be provided through the <a href="">Consul K-V store</a></li>
</ul>
<p>Note: Provisioning is hard to do automatically and right. All resources are
designed to be environment-independent,
i.e. they only have standard configurations encoded, ones that are valid for all
environments. In order to get configurations that are environment specific in them
you need a way for the resource to know where to fetch those from, e.g.
a web address or the Consul K-V store. However in order to tell the resource
what the configuration store is you need to provide an environment specific
configuration when the resource is first initialized, i.e. the initial
configuration. It's this initial configuration that is tricky. For containers
you can pass an environment variable, for VMs you can use an ISO file</p>
<p>In Calvinverse all resources assume that an ISO file (i.e. a CD / DVD) is mounted
when the resource first boots (for VMs), or environment variables are set
(for containers). These initial configurations only contain information on
how to connect to the Consul cluster in the environment. Once connected
all other configuration values can be obtained from the Consul K-V or the
Vault secret store</p>
<ul>
<li>Configurations are stored in different repositories
<ul>
<li>General configurations, mostly setting information for the different resources. While the environment
is running will be stored in the Consul key-value store. The original values are stored in the
<a href="">Calvinverse.Infrastructure</a> repository</li>
<li>Dashboards</li>
<li>Log filters</li>
<li>Elasticsearch index templates</li>
</ul>
</li>
<li>Ideally builds will be configured so that a change to the configuration will be tested and pushed
to a suitable test environment</li>
</ul>

</div>

            </div>
        </div>


        <footer>
            <div id="footer">
    <div id="fbox1">
        <h2>Related</h2>
        <ul>
            <li><a href="https://github.com/Calvinverse"><i class="fa fa-github"></i> GitHub</a></li>
        </ul>
    </div>
    <div id="fbox2">
        <h2 id="copyright">Copyright</h2>
        <p>Copyright (c) 2020 <a href="/">Petrik van der Velde</a>. All rights reserved.</p>

        <h2 id="disclaimer">Disclaimer</h2>
        <p>The opinions expressed herein are my own personal opinions and do not represent my employer's view in any way.</p>
    </div>
    <div id="fbox3">
        <h2 id="media">Media</h2>
        <p><a href="/feed.rss"><img src="/assets/img/feed.png" alt="RSS feed"></a></p>
    </div>
</div>
<div id="copyright">
    <p>
        Generated by <a href="https://wyam.io" class="link link--light">Wyam</a> on Mon, 16 Nov 2020 09:37:11 GMT

 from commit <a href="https://github.com/calvinverse/calvinverse.docs/tree/be1b196c5a32b50884e644520cff6ffcfd48d2d0" class="link link--light">be1b196c5a32b50884e644520cff6ffcfd48d2d0</a> at version 0.1.8.    </p>
</div>
        </footer>
    </body>
</html>